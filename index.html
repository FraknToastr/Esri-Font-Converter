<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESRI Font Symbol Exporter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
        }

        h1 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            color: #718096;
            margin-bottom: 30px;
            font-size: 0.95em;
        }

        .input-section {
            background: #f7fafc;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #2d3748;
            font-weight: 600;
            font-size: 0.9em;
        }

        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 15px;
        }

        .toggle-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .toggle-btn {
            flex: 1;
            padding: 10px 20px;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .toggle-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 14px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-generate {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-download {
            background: #48bb78;
            color: white;
        }

        .btn-download:hover {
            background: #38a169;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(72, 187, 120, 0.3);
        }

        .btn-download:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
            transform: none;
        }

        .preview-section {
            margin-top: 30px;
        }

        .preview-title {
            font-size: 1.1em;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .preview-box {
            background: #f7fafc;
            border: 2px dashed #cbd5e0;
            border-radius: 12px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px;
        }

        .preview-content {
            text-align: center;
        }

        .symbol-preview {
            font-size: 120px;
            line-height: 1;
            margin-bottom: 15px;
        }

        .symbol-info {
            color: #718096;
            font-size: 0.9em;
        }

        .empty-state {
            color: #a0aec0;
            font-size: 1.1em;
        }

        .info-box {
            background: #edf2f7;
            border-left: 4px solid #4299e1;
            padding: 15px 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .info-box p {
            color: #2d3748;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .error {
            background: #fed7d7;
            border-left-color: #f56565;
        }

        .error p {
            color: #742a2a;
        }

        .font-dropdown {
            position: absolute;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            max-height: 300px;
            overflow-y: auto;
            width: calc(100% - 30px);
            margin-top: 5px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .font-option {
            padding: 12px 15px;
            cursor: pointer;
            transition: background 0.2s;
            border-bottom: 1px solid #f7fafc;
        }

        .font-option:hover {
            background: #f7fafc;
        }

        .font-option:last-child {
            border-bottom: none;
        }

        .font-option.selected {
            background: #edf2f7;
            font-weight: 600;
        }

        .no-results {
            padding: 15px;
            text-align: center;
            color: #a0aec0;
            font-style: italic;
        }

        #fontSearch {
            position: relative;
        }

        .input-group {
            position: relative;
        }

        @media (max-width: 768px) {
            .input-row {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¨ ESRI Font Symbol Exporter</h1>
        <p class="subtitle">Export font symbols as SVG or PNG files</p>

        <div class="input-section">
            <div class="input-group">
                <label for="fontSearch">Select ESRI Font</label>
                <input type="text" id="fontSearch" placeholder="Search fonts..." autocomplete="off">
                <div id="fontDropdown" class="font-dropdown" style="display: none;"></div>
                <input type="hidden" id="fontSelect">
            </div>

            <div class="input-row">
                <div class="input-group">
                    <label for="keyInput">Key Character</label>
                    <input type="text" id="keyInput" placeholder="e.g., A, !, Space" maxlength="10">
                </div>

                <div class="input-group">
                    <label for="decimalInput">Decimal Code</label>
                    <input type="number" id="decimalInput" placeholder="e.g., 65" min="0" max="65535">
                </div>

                <div class="input-group">
                    <label for="hexInput">Hex Code</label>
                    <input type="text" id="hexInput" placeholder="e.g., 41" maxlength="4">
                </div>
            </div>

            <div class="input-group">
                <label>Export Format</label>
                <div class="toggle-group">
                    <button class="toggle-btn active" data-format="svg">SVG</button>
                    <button class="toggle-btn" data-format="png">PNG</button>
                </div>
            </div>

            <div class="input-group" id="pngOptions" style="display: none;">
                <label for="sizeInput">PNG Size (pixels)</label>
                <input type="number" id="sizeInput" value="512" min="64" max="2048" step="64">
            </div>

            <div class="action-buttons">
                <button class="btn-generate" onclick="generatePreview()">Generate Preview</button>
                <button class="btn-download" id="downloadBtn" disabled onclick="downloadSymbol()">Download Symbol</button>
            </div>
        </div>

        <div class="preview-section">
            <div class="preview-title">Preview</div>
            <div class="preview-box" id="previewBox">
                <div class="empty-state">Enter a character code and click "Generate Preview"</div>
            </div>
        </div>

        <div class="info-box">
            <p><strong>How to use:</strong> Enter a character using any method (key, decimal, or hex code). The other fields will auto-populate. Select your font, choose export format, and generate a preview. Click download to save the symbol.</p>
        </div>
    </div>

    <script>
        // Complete ESRI Font List
        const esriFonts = [
            'ESRI Accident',
            'ESRI ADS-1',
            'ESRI ADS-2',
            'ESRI ADS-3',
            'ESRI AMFM Electric',
            'ESRI AMFM Gas',
            'ESRI AMFM Sewer',
            'ESRI AMFM Water',
            'ESRI ArcPad',
            'ESRI Arrowhead',
            'ESRI Business',
            'ESRI Cartography',
            'ESRI Caves 1',
            'ESRI Caves 2',
            'ESRI Caves 3',
            'ESRI Climate & Precipitation',
            'ESRI Commodities',
            'ESRI Conservation',
            'ESRI Crime Analysis',
            'ESRI Default Marker',
            'ESRI Dimensioning',
            'ESRI ELC GeoSym1',
            'ESRI ELC GeoSym2',
            'ESRI ELC GeoSym3',
            'ESRI ELC INFL1',
            'ESRI ELC INFL2',
            'ESRI ELC INFL3',
            'ESRI ELC Operations',
            'ESRI Electric',
            'ESRI Electrical',
            'ESRI Emergency Management',
            'ESRI Environmental & Icons',
            'ESRI Fire Incident NFPA',
            'ESRI Flags',
            'ESRI Geometric Symbols',
            'ESRI Geology',
            'ESRI Geology AGSO 1',
            'ESRI Geology AGSO 2',
            'ESRI Geology AGSO 3',
            'ESRI Geology USGS 95-525',
            'ESRI Geology USGS 95-525 Annex',
            'ESRI Hazmat Incidents',
            'ESRI Hazmat Infrastructure',
            'ESRI Hazmat Response',
            'ESRI Hazmat Transportation',
            'ESRI Hydrants',
            'ESRI IGL Font01',
            'ESRI IGL Font02',
            'ESRI IGL Font03',
            'ESRI IGL Font04',
            'ESRI IGL Font05',
            'ESRI IGL Font06',
            'ESRI IGL Font07',
            'ESRI IGL Font08',
            'ESRI IGL Font09',
            'ESRI IGL Font10',
            'ESRI IGL Font11',
            'ESRI IGL Font12',
            'ESRI IGL Font13',
            'ESRI IGL Font14',
            'ESRI IGL Font15',
            'ESRI IGL Font16',
            'ESRI IGL Font17',
            'ESRI IGL Font18',
            'ESRI IGL Font19',
            'ESRI IGL Font20',
            'ESRI IGL Font21',
            'ESRI IGL Font22',
            'ESRI IGL Font23',
            'ESRI IGL Font24',
            'ESRI IGL Font25',
            'ESRI Literacy',
            'ESRI MilMod 01',
            'ESRI MilMod 02',
            'ESRI Mines',
            'ESRI North',
            'ESRI Oil, Gas, & Water',
            'ESRI Ordnance Survey',
            'ESRI Pipeline US 1',
            'ESRI Plates',
            'ESRI Public1',
            'ESRI Residential',
            'ESRI SDS 1.95 1',
            'ESRI SDS 1.95 2',
            'ESRI SDS 2.00 1',
            'ESRI SDS 2.00 2',
            'ESRI Shields & Highway Signs',
            'ESRI Surveying COGO',
            'ESRI Target',
            'ESRI Telecom',
            'ESRI Transportation & Civic',
            'ESRI Triangles',
            'ESRI US 1950 FIPS',
            'ESRI US 1970 FIPS',
            'ESRI US 1990 FIPS',
            'ESRI US Caves 1',
            'ESRI US Caves 2',
            'ESRI US Forestry 1',
            'ESRI US Forestry 2',
            'ESRI US MUTCD 1',
            'ESRI US MUTCD 2',
            'ESRI US MUTCD 3',
            'ESRI Valves 1',
            'ESRI Water',
            'ESRI Weather',
            'ESRI Weatherstations E-OBS'
        ].sort();

        let currentFormat = 'svg';
        let currentCharCode = null;
        let currentFont = null;

        // Font search and dropdown functionality
        const fontSearch = document.getElementById('fontSearch');
        const fontDropdown = document.getElementById('fontDropdown');
        const fontSelect = document.getElementById('fontSelect');

        function populateFontDropdown(filterText = '') {
            const filtered = esriFonts.filter(font => 
                font.toLowerCase().includes(filterText.toLowerCase())
            );

            if (filtered.length === 0) {
                fontDropdown.innerHTML = '<div class="no-results">No fonts found</div>';
            } else {
                fontDropdown.innerHTML = filtered.map(font => 
                    `<div class="font-option" data-font="${font}">${font}</div>`
                ).join('');

                // Add click handlers
                document.querySelectorAll('.font-option').forEach(option => {
                    option.addEventListener('click', function() {
                        selectFont(this.dataset.font);
                    });
                });
            }
        }

        function selectFont(fontName) {
            fontSearch.value = fontName;
            fontSelect.value = fontName;
            currentFont = fontName;
            fontDropdown.style.display = 'none';
            
            // Update selected styling
            document.querySelectorAll('.font-option').forEach(opt => 
                opt.classList.remove('selected')
            );
        }

        fontSearch.addEventListener('focus', function() {
            populateFontDropdown(this.value);
            fontDropdown.style.display = 'block';
        });

        fontSearch.addEventListener('input', function() {
            populateFontDropdown(this.value);
            fontDropdown.style.display = 'block';
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.input-group')) {
                fontDropdown.style.display = 'none';
            }
        });

        // Toggle format buttons
        document.querySelectorAll('.toggle-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.toggle-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentFormat = this.dataset.format;
                
                // Show/hide PNG options
                document.getElementById('pngOptions').style.display = 
                    currentFormat === 'png' ? 'block' : 'none';
            });
        });

        // Input synchronization
        const keyInput = document.getElementById('keyInput');
        const decimalInput = document.getElementById('decimalInput');
        const hexInput = document.getElementById('hexInput');

        keyInput.addEventListener('input', function() {
            if (this.value) {
                let code;
                if (this.value.toLowerCase() === 'space') {
                    code = 32;
                } else {
                    code = this.value.charCodeAt(0);
                }
                decimalInput.value = code;
                hexInput.value = code.toString(16).toUpperCase();
            }
        });

        decimalInput.addEventListener('input', function() {
            if (this.value) {
                const code = parseInt(this.value);
                if (code >= 0 && code <= 65535) {
                    hexInput.value = code.toString(16).toUpperCase();
                    if (code === 32) {
                        keyInput.value = 'Space';
                    } else if (code >= 33 && code <= 126) {
                        keyInput.value = String.fromCharCode(code);
                    } else {
                        keyInput.value = `U+${code.toString(16).toUpperCase()}`;
                    }
                }
            }
        });

        hexInput.addEventListener('input', function() {
            if (this.value) {
                const code = parseInt(this.value, 16);
                if (!isNaN(code)) {
                    decimalInput.value = code;
                    if (code === 32) {
                        keyInput.value = 'Space';
                    } else if (code >= 33 && code <= 126) {
                        keyInput.value = String.fromCharCode(code);
                    } else {
                        keyInput.value = `U+${code.toString(16).toUpperCase()}`;
                    }
                }
            }
        });

        function generatePreview() {
            const selectedFont = fontSelect.value;
            const decimalCode = parseInt(decimalInput.value);
            
            if (!selectedFont) {
                showError('Please select a font');
                return;
            }
            
            if (!decimalCode || isNaN(decimalCode)) {
                showError('Please enter a valid character code');
                return;
            }

            currentFont = selectedFont;
            currentCharCode = decimalCode;
            
            const character = String.fromCharCode(decimalCode);
            const previewBox = document.getElementById('previewBox');
            
            previewBox.innerHTML = `
                <div class="preview-content">
                    <div class="symbol-preview" style="font-family: '${currentFont}', sans-serif;">${character}</div>
                    <div class="symbol-info">
                        <strong>Character:</strong> ${keyInput.value}<br>
                        <strong>Decimal:</strong> ${decimalCode} | <strong>Hex:</strong> 0x${decimalCode.toString(16).toUpperCase()}<br>
                        <strong>Font:</strong> ${currentFont}
                    </div>
                </div>
            `;
            
            document.getElementById('downloadBtn').disabled = false;
        }

        function showError(message) {
            const previewBox = document.getElementById('previewBox');
            previewBox.innerHTML = `<div class="error-message" style="color: #f56565;">${message}</div>`;
            document.getElementById('downloadBtn').disabled = true;
        }

        function downloadSymbol() {
            if (!currentCharCode || !currentFont) {
                alert('Please generate a preview first');
                return;
            }

            const character = String.fromCharCode(currentCharCode);
            const filename = `symbol_${currentCharCode}_${currentFormat}`;

            if (currentFormat === 'svg') {
                downloadSVG(character, filename);
            } else {
                downloadPNG(character, filename);
            }
        }

        function downloadSVG(character, filename) {
            const size = 512;
            const svg = `<?xml version="1.0" encoding="UTF-8"?>
<svg width="${size}" height="${size}" xmlns="http://www.w3.org/2000/svg">
    <rect width="${size}" height="${size}" fill="transparent"/>
    <text x="50%" y="50%" 
          font-family="${currentFont}" 
          font-size="${size * 0.8}" 
          text-anchor="middle" 
          dominant-baseline="central"
          fill="black">${character}</text>
</svg>`;

            const blob = new Blob([svg], { type: 'image/svg+xml' });
            downloadBlob(blob, filename + '.svg');
        }

        function downloadPNG(character, filename) {
            const size = parseInt(document.getElementById('sizeInput').value) || 512;
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');

            // Transparent background
            ctx.clearRect(0, 0, size, size);

            // Draw character
            ctx.font = `${size * 0.8}px ${currentFont}`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillStyle = 'black';
            ctx.fillText(character, size / 2, size / 2);

            canvas.toBlob(function(blob) {
                downloadBlob(blob, filename + '.png');
            });
        }

        function downloadBlob(blob, filename) {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
